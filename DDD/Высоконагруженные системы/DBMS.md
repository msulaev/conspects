Архитектуры СУБД
![[Pasted image 20250530163329.png]]
![[Pasted image 20250530163548.png]]


![[Pasted image 20250530163815.png]]

Storage:
База данных это набор файлов
![[Pasted image 20250530164159.png]]
ЧТо происходит с одной ноды?
ПОчему не хранить все в одном файле?
DBMS дает нам функциональность, которой нет для одного файла.
- Мы не зависим от того, как хранятся наши данные.
- Канкарренси контроль. 
- Краш рекавери


Архитектура:
DB USER 
добавляем в файл запись 10 \ Misha | 7
Paging - разобьем файл на пейджи, где каждая пейда будет 4, 8, 19 кб
Размер пейджей необязательно матчиться с пейджами ОС

 Как нам писать данные в каждую пейджу?
 Что в ней надо хранить:
 - Хэдер (счексумма)
 - свободное место (оффсет)
 Если запись фиксированной длины, как нам складывать запись?
 
 Какие проблемы могут быть?
 Если запись будет удалена, как отслеживать свободное место?
 Так как запись фиксированной длины, мы ориентируюясь на длину мы можем скакать между ними.
 Допустим есть запись 10 Миша 7
 - 10 занимает сколько-то байт
 - 7 сколько-то байт
 - МИша - может зарезервировать 32 байта
![[Pasted image 20250612102441.png]]
Если слишком большая запись, то Overflow Page или Toast в Постгресе

А сможем ли мы быстро отдать запись PAge 3, запись 2.
Как это сделать.
Мы для каждой записи делаем свой хэдер.